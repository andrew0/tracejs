import{e as c,f as E,h as T,i as N,j as C,_ as V,g as k}from"./index.c1e4cfe3.js";import{d as S,s as w,q as m,H as $,o as i,c as l,a as t,E as d,Q as _,J as P,G as I,F as D,r as R,B as u,t as W,I as M,D as v,w as A,n as b,z as O}from"./vendor.9f3413dc.js";import{S as U}from"./BaseChart.b567492b.js";import{S as j}from"./SimulationToolbar.b99795e0.js";import"./constants.2145432e.js";const B=S({setup(){const e=k(),o=e.config,n=e.analysisConfig,h=new Set,y=w(typeof n.itemsToWatch=="number"?n.itemsToWatch:10),f=m({get(){return Array.isArray(n.itemsToWatch)},set(a){a?n.itemsToWatch=Array.from(h,r=>r.phon):n.itemsToWatch=y.value}});$(()=>{f.value||(n.itemsToWatch=y.value)});const s=w(c.ACTIVATIONS);return $(()=>{s.value===c.ACTIVATIONS?n.kValue=0:s.value===c.COMPETITION_INDEX?n.kValue=-1:n.kValue=4}),{asAny:a=>a,store:e,simConfig:o,config:n,domainWords:E.WORDS,domainPhonemes:E.PHONEMES,contentTypeResponseProbabilities:c.RESPONSE_PROBABILITIES,contentTypeActivations:c.ACTIVATIONS,contentTypeCompetitionIndex:c.COMPETITION_INDEX,competTypeRaw:T.RAW,competTypeFirstDeriv:T.FIRST_DERIVATIVE,competTypeSecondDeriv:T.SECOND_DERIVATIVE,choiceNormal:N.NORMAL,choiceForced:N.FORCED,alignments:{"Max (Post-Hoc)":C.MAX_POSTHOC,Specified:C.STATIC},contentType:s,itemsToWatch:h,numItemsToWatch:y,useSpecifiedItems:f,shouldShowAlignmentCalc:m(()=>s.value!==c.COMPETITION_INDEX),shouldShowAlignment:m(()=>{const{calculationType:a}=n;return s.value!==c.COMPETITION_INDEX&&a===C.STATIC}),shouldShowLuceChoice:m(()=>s.value===c.RESPONSE_PROBABILITIES),shouldShowItems:m(()=>s.value!==c.COMPETITION_INDEX),shouldShowCompetIndex:m(()=>s.value===c.COMPETITION_INDEX),shouldShowCompetSlope:m(()=>s.value===c.COMPETITION_INDEX&&n.competType!==T.RAW),isWatchingItem(a){return h.has(a)},setIsWatchingItem(a,r){r?(h.add(a),n.itemsToWatch=Array.from(h,g=>g.phon)):h.delete(a)}}}}),F=t("p",null," NOTE: if the chart doesn't appear, try resizing your browser window to make it redraw (this is a known bug) ",-1),X={class:"field"},H={class:"field"},K=t("label",{class:"label"},"Analyze",-1),z={class:"control"},J={class:"radio"},q=["value"],G=u(" Words "),Q={class:"radio"},Y=["value"],Z=u(" Phonemes "),x={class:"field"},ee=t("label",{class:"label"},"Content",-1),te={class:"control"},se={class:"select"},oe=["value"],ae=["value"],ne=["value"],ie={key:0,class:"field"},le=t("label",{class:"label"},"Items",-1),de={class:"control"},re={class:"radio"},ce=u(" Use top "),ue=["disabled"],he=u(" items "),pe={class:"control"},me={class:"radio"},ye=u(" Use selected items "),_e={key:0,class:"items-container"},fe={class:"checkbox"},ve=["checked","onChange"],be={key:1,class:"control"},Te={class:"checkbox"},Ie=u(" Exclude silence "),ge={key:1,class:"field"},Ce=t("label",{class:"label"},"Alignment Calculation",-1),Se={class:"radio"},Ae=["value"],Oe={key:2,class:"field"},Ee=t("label",{class:"label"},"Alignment",-1),Ne={class:"control"},Ve={key:3,class:"field"},ke=t("label",{class:"label"},"Luce Choice",-1),we={class:"control"},$e={class:"radio"},Pe=["value"],De=u(" All Items "),Re={class:"radio"},We=["value"],Le=u(" Forced Choice "),Me=t("br",null,null,-1),Ue=u(" K Value "),je={key:4,class:"field"},Be=t("label",{class:"label"},"Global Competition Index",-1),Fe={class:"control"},Xe={class:"select"},He=["value"],Ke=["value"],ze=["value"],Je={key:5,class:"field"},qe=t("label",{class:"label"},"Sampling Width",-1),Ge={class:"control"};function Qe(e,o,n,h,y,f){return i(),l("div",null,[F,t("div",X,[t("button",{class:"button",onClick:o[0]||(o[0]=s=>e.store.updateAnalysis())},"Refresh chart")]),t("div",H,[K,t("div",z,[t("label",J,[d(t("input",{type:"radio",name:"domain",value:e.domainWords,"onUpdate:modelValue":o[1]||(o[1]=s=>e.config.domain=s)},null,8,q),[[_,e.config.domain]]),G]),t("label",Q,[d(t("input",{type:"radio",name:"domain",value:e.domainPhonemes,"onUpdate:modelValue":o[2]||(o[2]=s=>e.config.domain=s)},null,8,Y),[[_,e.config.domain]]),Z])])]),t("div",x,[ee,t("div",te,[t("div",se,[d(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.contentType=s)},[t("option",{value:e.contentTypeActivations},"Activations",8,oe),t("option",{value:e.contentTypeResponseProbabilities},"Response Probabilities",8,ae),t("option",{value:e.contentTypeCompetitionIndex},"Competition Index",8,ne)],512),[[P,e.contentType]])])])]),e.shouldShowItems?(i(),l("div",ie,[le,t("div",de,[t("label",re,[d(t("input",{type:"radio",name:"items",value:!1,"onUpdate:modelValue":o[4]||(o[4]=s=>e.useSpecifiedItems=s)},null,512),[[_,e.useSpecifiedItems]]),ce,d(t("input",{type:"number",style:{width:"50px"},disabled:e.useSpecifiedItems,"onUpdate:modelValue":o[5]||(o[5]=s=>e.numItemsToWatch=s)},null,8,ue),[[I,e.numItemsToWatch]]),he])]),t("div",pe,[t("label",me,[d(t("input",{type:"radio",name:"items",value:!0,"onUpdate:modelValue":o[6]||(o[6]=s=>e.useSpecifiedItems=s)},null,512),[[_,e.useSpecifiedItems]]),ye])]),e.useSpecifiedItems?(i(),l("div",_e,[(i(!0),l(D,null,R(e.simConfig.lexicon,(s,a)=>(i(),l("div",{key:a,class:"control"},[t("label",fe,[t("input",{type:"checkbox",checked:e.isWatchingItem(s),onChange:r=>e.setIsWatchingItem(s,e.asAny(r).target.checked)},null,40,ve),u(" "+W(s.phon),1)])]))),128))])):(i(),l("div",be,[t("label",Te,[d(t("input",{type:"checkbox",name:"items","onUpdate:modelValue":o[7]||(o[7]=s=>e.config.excludeSilence=s)},null,512),[[M,e.config.excludeSilence]]),Ie])]))])):v("",!0),e.shouldShowAlignmentCalc?(i(),l("div",ge,[Ce,(i(!0),l(D,null,R(e.alignments,(s,a)=>(i(),l("div",{key:s,class:"control"},[t("label",Se,[d(t("input",{type:"radio",name:"alignment",value:s,"onUpdate:modelValue":o[8]||(o[8]=r=>e.config.calculationType=r)},null,8,Ae),[[_,e.config.calculationType]]),u(" "+W(a),1)])]))),128))])):v("",!0),e.shouldShowAlignment?(i(),l("div",Oe,[Ee,t("div",Ne,[d(t("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":o[9]||(o[9]=s=>e.config.alignment=s)},null,512),[[I,e.config.alignment]])])])):v("",!0),e.shouldShowLuceChoice?(i(),l("div",Ve,[ke,t("div",we,[t("label",$e,[d(t("input",{type:"radio",name:"choice",value:e.choiceNormal,"onUpdate:modelValue":o[10]||(o[10]=s=>e.config.choice=s)},null,8,Pe),[[_,e.config.choice]]),De]),t("label",Re,[d(t("input",{type:"radio",name:"choice",value:e.choiceForced,"onUpdate:modelValue":o[11]||(o[11]=s=>e.config.choice=s)},null,8,We),[[_,e.config.choice]]),Le])]),Me,t("label",null,[Ue,d(t("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":o[12]||(o[12]=s=>e.config.kValue=s),style:{width:"50px"}},null,512),[[I,e.config.kValue]])])])):v("",!0),e.shouldShowCompetIndex?(i(),l("div",je,[Be,t("div",Fe,[t("div",Xe,[d(t("select",{"onUpdate:modelValue":o[13]||(o[13]=s=>e.config.competType=s)},[t("option",{value:e.competTypeRaw},"Raw",8,He),t("option",{value:e.competTypeFirstDeriv},"1st Derivative",8,Ke),t("option",{value:e.competTypeSecondDeriv},"2nd Derivative",8,ze)],512),[[P,e.config.competType]])])])])):v("",!0),e.shouldShowCompetSlope?(i(),l("div",Je,[qe,t("div",Ge,[d(t("input",{class:"input",min:"2",type:"number","onUpdate:modelValue":o[14]||(o[14]=s=>e.config.competSlope=s)},null,512),[[I,e.config.competSlope]])])])):v("",!0)])}var Ye=V(B,[["render",Qe]]);function Ze(e,o){if(o){let n=this.$data._chart,h=e.datasets.map(a=>a.label),y=o.datasets.map(a=>a.label);const f=JSON.stringify(y);JSON.stringify(h)===f&&o.datasets.length===e.datasets.length?(e.datasets.forEach((a,r)=>{const g=Object.keys(o.datasets[r]),L=Object.keys(a);g.filter(p=>p!=="_meta"&&L.indexOf(p)===-1).forEach(p=>{delete n.data.datasets[r][p]});for(const p in a)a.hasOwnProperty(p)&&(n.data.datasets[r][p]=a[p])}),e.hasOwnProperty("labels")&&(n.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(n.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(n.data.yLabels=e.yLabels,this.$emit("ylabels:update")),n.update(),this.$emit("chart:update")):(n&&(n.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}const xe={props:{chartData:{type:Object,required:!0,default:()=>{}}},emits:["labels:update","xlabels:update","ylabels:update","chart:update","chart:destroy","chart:render"],watch:{chartData:Ze}};var et=S({extends:U,mixins:[xe],data(){return{options:{responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}}}}},mounted(){this.renderChart(this.chartData,this.options)}});const tt="_container_1348h_2",st="_toolbar_1348h_8",ot="_main_1348h_14",at="_grid_1348h_22";var nt={container:tt,toolbar:st,main:ot,grid:at,"chart-wrapper":"_chart-wrapper_1348h_28"};const it=S({name:"ChartTab",components:{SimulationToolbar:j,AnalysisConfig:Ye,AnalysisChart:et},setup(){const e=k();return{chartData:m(()=>({datasets:e.analysisData.value}))}}});function lt(e,o,n,h,y,f){const s=O("SimulationToolbar"),a=O("AnalysisConfig"),r=O("AnalysisChart");return i(),l("div",{class:b(e.$style.container)},[t("div",{class:b(e.$style.toolbar)},[A(s)],2),t("div",{class:b(e.$style.main)},[t("div",{class:b(e.$style.grid)},[A(a),A(r,{"chart-data":e.chartData,class:b(e.$style["chart-wrapper"])},null,8,["chart-data","class"])],2)],2)],2)}const dt={$style:nt};var yt=V(it,[["render",lt],["__cssModules",dt]]);export{yt as default};
