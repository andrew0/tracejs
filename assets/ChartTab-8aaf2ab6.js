import{d as O,r as E,b as m,k as N,I as r,J as V,K as T,L as k,M as C,g as R,_ as W,o as l,c as d,a as t,w as i,O as f,m as u,n as w,v as I,F as $,h as P,t as D,l as M,i as v,j as S,q as _,f as A}from"./index-3ead780b.js";import{S as U}from"./BaseChart-1eefaabe.js";import{S as F}from"./SimulationToolbar-0f21983a.js";import"./constants-a4e8d3dd.js";const X=O({setup(){const e=R(),o=e.config,n=e.analysisConfig,p=new Set,y=E(typeof n.itemsToWatch=="number"?n.itemsToWatch:10),b=m({get(){return Array.isArray(n.itemsToWatch)},set(a){a?n.itemsToWatch=Array.from(p,c=>c.phon):n.itemsToWatch=y.value}});N(()=>{b.value||(n.itemsToWatch=y.value)});const s=E(r.ACTIVATIONS);return N(()=>{s.value===r.ACTIVATIONS?n.kValue=0:s.value===r.COMPETITION_INDEX?n.kValue=-1:n.kValue=4}),{asAny:a=>a,store:e,simConfig:o,config:n,domainWords:V.WORDS,domainPhonemes:V.PHONEMES,contentTypeResponseProbabilities:r.RESPONSE_PROBABILITIES,contentTypeActivations:r.ACTIVATIONS,contentTypeCompetitionIndex:r.COMPETITION_INDEX,competTypeRaw:T.RAW,competTypeFirstDeriv:T.FIRST_DERIVATIVE,competTypeSecondDeriv:T.SECOND_DERIVATIVE,choiceNormal:k.NORMAL,choiceForced:k.FORCED,alignments:{"Max (Post-Hoc)":C.MAX_POSTHOC,Specified:C.STATIC},contentType:s,itemsToWatch:p,numItemsToWatch:y,useSpecifiedItems:b,shouldShowAlignmentCalc:m(()=>s.value!==r.COMPETITION_INDEX),shouldShowAlignment:m(()=>{const{calculationType:a}=n;return s.value!==r.COMPETITION_INDEX&&a===C.STATIC}),shouldShowLuceChoice:m(()=>s.value===r.RESPONSE_PROBABILITIES),shouldShowItems:m(()=>s.value!==r.COMPETITION_INDEX),shouldShowCompetIndex:m(()=>s.value===r.COMPETITION_INDEX),shouldShowCompetSlope:m(()=>s.value===r.COMPETITION_INDEX&&n.competType!==T.RAW),isWatchingItem(a){return p.has(a)},setIsWatchingItem(a,c){c?(p.add(a),n.itemsToWatch=Array.from(p,g=>g.phon)):p.delete(a)}}}});const B=t("p",null," NOTE: if the chart doesn't appear, try resizing your browser window to make it redraw (this is a known bug) ",-1),K={class:"field"},j={class:"field"},H=t("label",{class:"label"},"Analyze",-1),z={class:"control"},J={class:"radio"},q=["value"],G={class:"radio"},Q=["value"],Y={class:"field"},Z=t("label",{class:"label"},"Content",-1),x={class:"control"},ee={class:"select"},te=["value"],se=["value"],oe=["value"],ae={key:0,class:"field"},ne=t("label",{class:"label"},"Items",-1),ie={class:"control"},le={class:"radio"},de=["disabled"],ce={class:"control"},re={class:"radio"},ue={key:0,class:"items-container"},pe={class:"checkbox"},he=["checked","onChange"],me={key:1,class:"control"},ye={class:"checkbox"},fe={key:1,class:"field"},be=t("label",{class:"label"},"Alignment Calculation",-1),ve={class:"radio"},_e=["value"],Te={key:2,class:"field"},Ie=t("label",{class:"label"},"Alignment",-1),ge={class:"control"},Ce={key:3,class:"field"},Se=t("label",{class:"label"},"Luce Choice",-1),Ae={class:"control"},Oe={class:"radio"},Ee=["value"],Ne={class:"radio"},Ve=["value"],ke=t("br",null,null,-1),we={key:4,class:"field"},$e=t("label",{class:"label"},"Global Competition Index",-1),Pe={class:"control"},De={class:"select"},Re=["value"],We=["value"],Le=["value"],Me={key:5,class:"field"},Ue=t("label",{class:"label"},"Sampling Width",-1),Fe={class:"control"};function Xe(e,o,n,p,y,b){return l(),d("div",null,[B,t("div",K,[t("button",{class:"button",onClick:o[0]||(o[0]=s=>e.store.updateAnalysis())},"Refresh chart")]),t("div",j,[H,t("div",z,[t("label",J,[i(t("input",{type:"radio",name:"domain",value:e.domainWords,"onUpdate:modelValue":o[1]||(o[1]=s=>e.config.domain=s)},null,8,q),[[f,e.config.domain]]),u(" Words ")]),t("label",G,[i(t("input",{type:"radio",name:"domain",value:e.domainPhonemes,"onUpdate:modelValue":o[2]||(o[2]=s=>e.config.domain=s)},null,8,Q),[[f,e.config.domain]]),u(" Phonemes ")])])]),t("div",Y,[Z,t("div",x,[t("div",ee,[i(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.contentType=s)},[t("option",{value:e.contentTypeActivations},"Activations",8,te),t("option",{value:e.contentTypeResponseProbabilities},"Response Probabilities",8,se),t("option",{value:e.contentTypeCompetitionIndex},"Competition Index",8,oe)],512),[[w,e.contentType]])])])]),e.shouldShowItems?(l(),d("div",ae,[ne,t("div",ie,[t("label",le,[i(t("input",{type:"radio",name:"items",value:!1,"onUpdate:modelValue":o[4]||(o[4]=s=>e.useSpecifiedItems=s)},null,512),[[f,e.useSpecifiedItems]]),u(" Use top "),i(t("input",{type:"number",style:{width:"50px"},disabled:e.useSpecifiedItems,"onUpdate:modelValue":o[5]||(o[5]=s=>e.numItemsToWatch=s)},null,8,de),[[I,e.numItemsToWatch]]),u(" items ")])]),t("div",ce,[t("label",re,[i(t("input",{type:"radio",name:"items",value:!0,"onUpdate:modelValue":o[6]||(o[6]=s=>e.useSpecifiedItems=s)},null,512),[[f,e.useSpecifiedItems]]),u(" Use selected items ")])]),e.useSpecifiedItems?(l(),d("div",ue,[(l(!0),d($,null,P(e.simConfig.lexicon,(s,a)=>(l(),d("div",{key:a,class:"control"},[t("label",pe,[t("input",{type:"checkbox",checked:e.isWatchingItem(s),onChange:c=>e.setIsWatchingItem(s,e.asAny(c).target.checked)},null,40,he),u(" "+D(s.phon),1)])]))),128))])):(l(),d("div",me,[t("label",ye,[i(t("input",{type:"checkbox",name:"items","onUpdate:modelValue":o[7]||(o[7]=s=>e.config.excludeSilence=s)},null,512),[[M,e.config.excludeSilence]]),u(" Exclude silence ")])]))])):v("",!0),e.shouldShowAlignmentCalc?(l(),d("div",fe,[be,(l(!0),d($,null,P(e.alignments,(s,a)=>(l(),d("div",{key:s,class:"control"},[t("label",ve,[i(t("input",{type:"radio",name:"alignment",value:s,"onUpdate:modelValue":o[8]||(o[8]=c=>e.config.calculationType=c)},null,8,_e),[[f,e.config.calculationType]]),u(" "+D(a),1)])]))),128))])):v("",!0),e.shouldShowAlignment?(l(),d("div",Te,[Ie,t("div",ge,[i(t("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":o[9]||(o[9]=s=>e.config.alignment=s)},null,512),[[I,e.config.alignment]])])])):v("",!0),e.shouldShowLuceChoice?(l(),d("div",Ce,[Se,t("div",Ae,[t("label",Oe,[i(t("input",{type:"radio",name:"choice",value:e.choiceNormal,"onUpdate:modelValue":o[10]||(o[10]=s=>e.config.choice=s)},null,8,Ee),[[f,e.config.choice]]),u(" All Items ")]),t("label",Ne,[i(t("input",{type:"radio",name:"choice",value:e.choiceForced,"onUpdate:modelValue":o[11]||(o[11]=s=>e.config.choice=s)},null,8,Ve),[[f,e.config.choice]]),u(" Forced Choice ")])]),ke,t("label",null,[u(" K Value "),i(t("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":o[12]||(o[12]=s=>e.config.kValue=s),style:{width:"75px"}},null,512),[[I,e.config.kValue]])])])):v("",!0),e.shouldShowCompetIndex?(l(),d("div",we,[$e,t("div",Pe,[t("div",De,[i(t("select",{"onUpdate:modelValue":o[13]||(o[13]=s=>e.config.competType=s)},[t("option",{value:e.competTypeRaw},"Raw",8,Re),t("option",{value:e.competTypeFirstDeriv},"1st Derivative",8,We),t("option",{value:e.competTypeSecondDeriv},"2nd Derivative",8,Le)],512),[[w,e.config.competType]])])])])):v("",!0),e.shouldShowCompetSlope?(l(),d("div",Me,[Ue,t("div",Fe,[i(t("input",{class:"input",min:"2",type:"number","onUpdate:modelValue":o[14]||(o[14]=s=>e.config.competSlope=s)},null,512),[[I,e.config.competSlope]])])])):v("",!0)])}const Be=W(X,[["render",Xe]]);function Ke(e,o){if(o){let n=this.$data._chart,p=e.datasets.map(a=>a.label),y=o.datasets.map(a=>a.label);const b=JSON.stringify(y);JSON.stringify(p)===b&&o.datasets.length===e.datasets.length?(e.datasets.forEach((a,c)=>{const g=Object.keys(o.datasets[c]),L=Object.keys(a);g.filter(h=>h!=="_meta"&&L.indexOf(h)===-1).forEach(h=>{delete n.data.datasets[c][h]});for(const h in a)a.hasOwnProperty(h)&&(n.data.datasets[c][h]=a[h])}),e.hasOwnProperty("labels")&&(n.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(n.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(n.data.yLabels=e.yLabels,this.$emit("ylabels:update")),n.update(),this.$emit("chart:update")):(n&&(n.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}const je={props:{chartData:{type:Object,required:!0,default:()=>{}}},emits:["labels:update","xlabels:update","ylabels:update","chart:update","chart:destroy","chart:render"],watch:{chartData:Ke}},He=O({extends:U,mixins:[je],data(){return{options:{responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}}}}},mounted(){this.renderChart(this.chartData,this.options)}}),ze=O({name:"ChartTab",components:{SimulationToolbar:F,AnalysisConfig:Be,AnalysisChart:He},setup(){const e=R();return{chartData:m(()=>({datasets:e.analysisData.value}))}}}),Je="_container_1348h_2",qe="_toolbar_1348h_8",Ge="_main_1348h_14",Qe="_grid_1348h_22",Ye={container:Je,toolbar:qe,main:Ge,grid:Qe,"chart-wrapper":"_chart-wrapper_1348h_28"};function Ze(e,o,n,p,y,b){const s=A("SimulationToolbar"),a=A("AnalysisConfig"),c=A("AnalysisChart");return l(),d("div",{class:_(e.$style.container)},[t("div",{class:_(e.$style.toolbar)},[S(s)],2),t("div",{class:_(e.$style.main)},[t("div",{class:_(e.$style.grid)},[S(a),S(c,{"chart-data":e.chartData,class:_(e.$style["chart-wrapper"])},null,8,["chart-data","class"])],2)],2)],2)}const xe={$style:Ye},nt=W(ze,[["render",Ze],["__cssModules",xe]]);export{nt as default};
