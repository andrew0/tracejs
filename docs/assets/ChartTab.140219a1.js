import{_ as e}from"./SimulationToolbar.564ac2aa.js";import{g as a,a as t,b as l,d as s,e as o,f as i}from"./index.777d10f6.js";import{d as n,f as c,e as d,s as r,o as u,c as p,a as m,u as h,H as y,y as v,x as b,F as f,r as I,m as T,t as g,v as S,B as C,h as O,j as A,n as _}from"./vendor.66dd1abc.js";import{S as E}from"./BaseChart.2b94d205.js";var w=n({setup(){const e=a(),n=e.config,u=e.analysisConfig,p=new Set,m=c("number"==typeof u.itemsToWatch?u.itemsToWatch:10),h=d({get:()=>Array.isArray(u.itemsToWatch),set(e){u.itemsToWatch=e?Array.from(p,(e=>e.phon)):m.value}});r((()=>{h.value||(u.itemsToWatch=m.value)}));const y=c(t.ACTIVATIONS);return r((()=>{y.value===t.ACTIVATIONS?u.kValue=0:y.value===t.COMPETITION_INDEX?u.kValue=-1:u.kValue=4})),{store:e,simConfig:n,config:u,domainWords:l.WORDS,domainPhonemes:l.PHONEMES,contentTypeResponseProbabilities:t.RESPONSE_PROBABILITIES,contentTypeActivations:t.ACTIVATIONS,contentTypeCompetitionIndex:t.COMPETITION_INDEX,competTypeRaw:s.RAW,competTypeFirstDeriv:s.FIRST_DERIVATIVE,competTypeSecondDeriv:s.SECOND_DERIVATIVE,choiceNormal:o.NORMAL,choiceForced:o.FORCED,alignments:{"Max (Post-Hoc)":i.MAX_POSTHOC,Specified:i.STATIC},contentType:y,itemsToWatch:p,numItemsToWatch:m,useSpecifiedItems:h,shouldShowAlignmentCalc:d((()=>y.value!==t.COMPETITION_INDEX)),shouldShowAlignment:d((()=>{const{calculationType:e}=u;return y.value!==t.COMPETITION_INDEX&&e===i.STATIC})),shouldShowLuceChoice:d((()=>y.value===t.RESPONSE_PROBABILITIES)),shouldShowItems:d((()=>y.value!==t.COMPETITION_INDEX)),shouldShowCompetIndex:d((()=>y.value===t.COMPETITION_INDEX)),shouldShowCompetSlope:d((()=>y.value===t.COMPETITION_INDEX&&u.competType!==s.RAW)),isWatchingItem:e=>p.has(e),setIsWatchingItem(e,a){a?(p.add(e),u.itemsToWatch=Array.from(p,(e=>e.phon))):p.delete(e)}}}});const x=m("p",null," NOTE: if the chart doesn't appear, try resizing your browser window to make it redraw (this is a known bug) ",-1),k={class:"field"},N={class:"field"},V=m("label",{class:"label"},"Analyze",-1),D={class:"control"},P={class:"radio"},R=["value"],W=T(" Words "),$={class:"radio"},U=["value"],L=T(" Phonemes "),M={class:"field"},j=m("label",{class:"label"},"Content",-1),F={class:"control"},X={class:"select"},B=["value"],H=["value"],z=["value"],J={key:0,class:"field"},q=m("label",{class:"label"},"Items",-1),G={class:"control"},K={class:"radio"},Q=T(" Use top "),Y=["disabled"],Z=T(" items "),ee={class:"control"},ae={class:"radio"},te=T(" Use selected items "),le={key:0,class:"items-container"},se={class:"checkbox"},oe=["checked","onChange"],ie={key:1,class:"control"},ne={class:"checkbox"},ce=T(" Exclude silence "),de={key:1,class:"field"},re=m("label",{class:"label"},"Alignment Calculation",-1),ue={class:"radio"},pe=["value"],me={key:2,class:"field"},he=m("label",{class:"label"},"Alignment",-1),ye={class:"control"},ve={key:3,class:"field"},be=m("label",{class:"label"},"Luce Choice",-1),fe={class:"control"},Ie={class:"radio"},Te=["value"],ge=T(" All Items "),Se={class:"radio"},Ce=["value"],Oe=T(" Forced Choice "),Ae=m("br",null,null,-1),_e=T(" K Value "),Ee={key:4,class:"field"},we=m("label",{class:"label"},"Global Competition Index",-1),xe={class:"control"},ke={class:"select"},Ne=["value"],Ve=["value"],De=["value"],Pe={key:5,class:"field"},Re=m("label",{class:"label"},"Sampling Width",-1),We={class:"control"};w.render=function(e,a,t,l,s,o){return u(),p("div",null,[x,m("div",k,[m("button",{class:"button",onClick:a[0]||(a[0]=a=>e.store.updateAnalysis())},"Refresh chart")]),m("div",N,[V,m("div",D,[m("label",P,[h(m("input",{type:"radio",name:"domain",value:e.domainWords,"onUpdate:modelValue":a[1]||(a[1]=a=>e.config.domain=a)},null,8,R),[[y,e.config.domain]]),W]),m("label",$,[h(m("input",{type:"radio",name:"domain",value:e.domainPhonemes,"onUpdate:modelValue":a[2]||(a[2]=a=>e.config.domain=a)},null,8,U),[[y,e.config.domain]]),L])])]),m("div",M,[j,m("div",F,[m("div",X,[h(m("select",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.contentType=a)},[m("option",{value:e.contentTypeActivations},"Activations",8,B),m("option",{value:e.contentTypeResponseProbabilities},"Response Probabilities",8,H),m("option",{value:e.contentTypeCompetitionIndex},"Competition Index",8,z)],512),[[v,e.contentType]])])])]),e.shouldShowItems?(u(),p("div",J,[q,m("div",G,[m("label",K,[h(m("input",{type:"radio",name:"items",value:!1,"onUpdate:modelValue":a[4]||(a[4]=a=>e.useSpecifiedItems=a)},null,512),[[y,e.useSpecifiedItems]]),Q,h(m("input",{type:"number",style:{width:"50px"},disabled:e.useSpecifiedItems,"onUpdate:modelValue":a[5]||(a[5]=a=>e.numItemsToWatch=a)},null,8,Y),[[b,e.numItemsToWatch]]),Z])]),m("div",ee,[m("label",ae,[h(m("input",{type:"radio",name:"items",value:!0,"onUpdate:modelValue":a[6]||(a[6]=a=>e.useSpecifiedItems=a)},null,512),[[y,e.useSpecifiedItems]]),te])]),e.useSpecifiedItems?(u(),p("div",le,[(u(!0),p(f,null,I(e.simConfig.lexicon,((a,t)=>(u(),p("div",{key:t,class:"control"},[m("label",se,[m("input",{type:"checkbox",checked:e.isWatchingItem(a),onChange:t=>e.setIsWatchingItem(a,t.target.checked)},null,40,oe),T(" "+g(a.phon),1)])])))),128))])):(u(),p("div",ie,[m("label",ne,[h(m("input",{type:"checkbox",name:"items","onUpdate:modelValue":a[7]||(a[7]=a=>e.config.excludeSilence=a)},null,512),[[S,e.config.excludeSilence]]),ce])]))])):C("",!0),e.shouldShowAlignmentCalc?(u(),p("div",de,[re,(u(!0),p(f,null,I(e.alignments,((t,l)=>(u(),p("div",{key:t,class:"control"},[m("label",ue,[h(m("input",{type:"radio",name:"alignment",value:t,"onUpdate:modelValue":a[8]||(a[8]=a=>e.config.calculationType=a)},null,8,pe),[[y,e.config.calculationType]]),T(" "+g(l),1)])])))),128))])):C("",!0),e.shouldShowAlignment?(u(),p("div",me,[he,m("div",ye,[h(m("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":a[9]||(a[9]=a=>e.config.alignment=a)},null,512),[[b,e.config.alignment]])])])):C("",!0),e.shouldShowLuceChoice?(u(),p("div",ve,[be,m("div",fe,[m("label",Ie,[h(m("input",{type:"radio",name:"choice",value:e.choiceNormal,"onUpdate:modelValue":a[10]||(a[10]=a=>e.config.choice=a)},null,8,Te),[[y,e.config.choice]]),ge]),m("label",Se,[h(m("input",{type:"radio",name:"choice",value:e.choiceForced,"onUpdate:modelValue":a[11]||(a[11]=a=>e.config.choice=a)},null,8,Ce),[[y,e.config.choice]]),Oe])]),Ae,m("label",null,[_e,h(m("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":a[12]||(a[12]=a=>e.config.kValue=a),style:{width:"50px"}},null,512),[[b,e.config.kValue]])])])):C("",!0),e.shouldShowCompetIndex?(u(),p("div",Ee,[we,m("div",xe,[m("div",ke,[h(m("select",{"onUpdate:modelValue":a[13]||(a[13]=a=>e.config.competType=a)},[m("option",{value:e.competTypeRaw},"Raw",8,Ne),m("option",{value:e.competTypeFirstDeriv},"1st Derivative",8,Ve),m("option",{value:e.competTypeSecondDeriv},"2nd Derivative",8,De)],512),[[v,e.config.competType]])])])])):C("",!0),e.shouldShowCompetSlope?(u(),p("div",Pe,[Re,m("div",We,[h(m("input",{class:"input",min:"2",type:"number","onUpdate:modelValue":a[14]||(a[14]=a=>e.config.competSlope=a)},null,512),[[b,e.config.competSlope]])])])):C("",!0)])};var $e=n({extends:E,mixins:[{props:{chartData:{type:Object,required:!0,default:()=>{}}},emits:["labels:update","xlabels:update","ylabels:update","chart:update","chart:destroy","chart:render"],watch:{chartData:function(e,a){if(a){let t=this.$data._chart,l=e.datasets.map((e=>e.label)),s=a.datasets.map((e=>e.label));const o=JSON.stringify(s);JSON.stringify(l)===o&&a.datasets.length===e.datasets.length?(e.datasets.forEach(((e,l)=>{const s=Object.keys(a.datasets[l]),o=Object.keys(e);s.filter((e=>"_meta"!==e&&-1===o.indexOf(e))).forEach((e=>{delete t.data.datasets[l][e]}));for(const a in e)e.hasOwnProperty(a)&&(t.data.datasets[l][a]=e[a])})),e.hasOwnProperty("labels")&&(t.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(t.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(t.data.yLabels=e.yLabels,this.$emit("ylabels:update")),t.update(),this.$emit("chart:update")):(t&&(t.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}}}],data:()=>({options:{responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}}}}),mounted(){this.renderChart(this.chartData,this.options)}}),Ue=n({name:"ChartTab",components:{SimulationToolbar:e,AnalysisConfig:w,AnalysisChart:$e},setup(){const e=a();return{chartData:d((()=>({datasets:e.analysisData.value})))}}});var Le={container:"_container_1348h_2",toolbar:"_toolbar_1348h_8",main:"_main_1348h_14",grid:"_grid_1348h_22","chart-wrapper":"_chart-wrapper_1348h_28"};(Ue.__cssModules={}).$style=Le,Ue.render=function(e,a,t,l,s,o){const i=O("SimulationToolbar"),n=O("AnalysisConfig"),c=O("AnalysisChart");return u(),p("div",{class:_(e.$style.container)},[m("div",{class:_(e.$style.toolbar)},[A(i)],2),m("div",{class:_(e.$style.main)},[m("div",{class:_(e.$style.grid)},[A(n),A(c,{"chart-data":e.chartData,class:_(e.$style["chart-wrapper"])},null,8,["chart-data","class"])],2)],2)],2)};export default Ue;
