import{_ as e}from"./SimulationToolbar.8f44acaa.js";import{d as a,r as t,c as l,w as s,B as o,C as i,D as n,E as c,G as d,g as r,o as u,a as p,b as m,e as h,H as y,h as v,f as b,F as f,i as I,j as T,t as g,v as S,n as C,k as O}from"./index.11f31a86.js";import{S as A}from"./BaseChart.12d7c0af.js";var _=a({setup(){const e=r(),a=e.config,u=e.analysisConfig,p=new Set,m=t("number"==typeof u.itemsToWatch?u.itemsToWatch:10),h=l({get:()=>Array.isArray(u.itemsToWatch),set(e){u.itemsToWatch=e?Array.from(p,(e=>e.phon)):m.value}});s((()=>{h.value||(u.itemsToWatch=m.value)}));const y=t(o.ACTIVATIONS);return s((()=>{y.value===o.ACTIVATIONS?u.kValue=0:y.value===o.COMPETITION_INDEX?u.kValue=-1:u.kValue=4})),{store:e,simConfig:a,config:u,domainWords:i.WORDS,domainPhonemes:i.PHONEMES,contentTypeResponseProbabilities:o.RESPONSE_PROBABILITIES,contentTypeActivations:o.ACTIVATIONS,contentTypeCompetitionIndex:o.COMPETITION_INDEX,competTypeRaw:n.RAW,competTypeFirstDeriv:n.FIRST_DERIVATIVE,competTypeSecondDeriv:n.SECOND_DERIVATIVE,choiceNormal:c.NORMAL,choiceForced:c.FORCED,alignments:{"Max (Post-Hoc)":d.MAX_POSTHOC,Specified:d.STATIC},contentType:y,itemsToWatch:p,numItemsToWatch:m,useSpecifiedItems:h,shouldShowAlignmentCalc:l((()=>y.value!==o.COMPETITION_INDEX)),shouldShowAlignment:l((()=>{const{calculationType:e}=u;return y.value!==o.COMPETITION_INDEX&&e===d.STATIC})),shouldShowLuceChoice:l((()=>y.value===o.RESPONSE_PROBABILITIES)),shouldShowItems:l((()=>y.value!==o.COMPETITION_INDEX)),shouldShowCompetIndex:l((()=>y.value===o.COMPETITION_INDEX)),shouldShowCompetSlope:l((()=>y.value===o.COMPETITION_INDEX&&u.competType!==n.RAW)),isWatchingItem:e=>p.has(e),setIsWatchingItem(e,a){a?(p.add(e),u.itemsToWatch=Array.from(p,(e=>e.phon))):p.delete(e)}}}});const E=m("p",null," NOTE: if the chart doesn't appear, try resizing your browser window to make it redraw (this is a known bug) ",-1),w={class:"field"},k={class:"field"},x=m("label",{class:"label"},"Analyze",-1),D={class:"control"},N={class:"radio"},V=T(" Words "),P={class:"radio"},R=T(" Phonemes "),W={class:"field"},$=m("label",{class:"label"},"Content",-1),U={class:"control"},L={class:"select"},M={key:0,class:"field"},F=m("label",{class:"label"},"Items",-1),X={class:"control"},j={class:"radio"},B=T(" Use top "),H=T(" items "),z={class:"control"},G={class:"radio"},J=T(" Use selected items "),q={key:0,class:"items-container"},K={class:"checkbox"},Q={key:1,class:"control"},Y={class:"checkbox"},Z=T(" Exclude silence phoneme "),ee={key:1,class:"field"},ae=m("label",{class:"label"},"Alignment Calculation",-1),te={class:"radio"},le={key:2,class:"field"},se=m("label",{class:"label"},"Alignment",-1),oe={class:"control"},ie={key:3,class:"field"},ne=m("label",{class:"label"},"Luce Choice",-1),ce={class:"control"},de={class:"radio"},re=T(" All Items "),ue={class:"radio"},pe=T(" Forced Choice "),me=m("br",null,null,-1),he=T(" K Value "),ye={key:4,class:"field"},ve=m("label",{class:"label"},"Global Competition Index",-1),be={class:"control"},fe={class:"select"},Ie={key:5,class:"field"},Te=m("label",{class:"label"},"Sampling Width",-1),ge={class:"control"};_.render=function(e,a,t,l,s,o){return u(),p("div",null,[E,m("div",w,[m("button",{class:"button",onClick:a[1]||(a[1]=a=>e.store.updateAnalysis())},"Refresh chart")]),m("div",k,[x,m("div",D,[m("label",N,[h(m("input",{type:"radio",name:"domain",value:e.domainWords,"onUpdate:modelValue":a[2]||(a[2]=a=>e.config.domain=a)},null,8,["value"]),[[y,e.config.domain]]),V]),m("label",P,[h(m("input",{type:"radio",name:"domain",value:e.domainPhonemes,"onUpdate:modelValue":a[3]||(a[3]=a=>e.config.domain=a)},null,8,["value"]),[[y,e.config.domain]]),R])])]),m("div",W,[$,m("div",U,[m("div",L,[h(m("select",{"onUpdate:modelValue":a[4]||(a[4]=a=>e.contentType=a)},[m("option",{value:e.contentTypeActivations},"Activations",8,["value"]),m("option",{value:e.contentTypeResponseProbabilities},"Response Probabilities",8,["value"]),m("option",{value:e.contentTypeCompetitionIndex},"Competition Index",8,["value"])],512),[[v,e.contentType]])])])]),e.shouldShowItems?(u(),p("div",M,[F,m("div",X,[m("label",j,[h(m("input",{type:"radio",name:"items",value:!1,"onUpdate:modelValue":a[5]||(a[5]=a=>e.useSpecifiedItems=a)},null,512),[[y,e.useSpecifiedItems]]),B,h(m("input",{type:"number",style:{width:"50px"},disabled:e.useSpecifiedItems,"onUpdate:modelValue":a[6]||(a[6]=a=>e.numItemsToWatch=a)},null,8,["disabled"]),[[b,e.numItemsToWatch]]),H])]),m("div",z,[m("label",G,[h(m("input",{type:"radio",name:"items",value:!0,"onUpdate:modelValue":a[7]||(a[7]=a=>e.useSpecifiedItems=a)},null,512),[[y,e.useSpecifiedItems]]),J])]),e.useSpecifiedItems?(u(),p("div",q,[(u(!0),p(f,null,I(e.simConfig.lexicon,((a,t)=>(u(),p("div",{key:t,class:"control"},[m("label",K,[m("input",{type:"checkbox",checked:e.isWatchingItem(a),onChange:t=>e.setIsWatchingItem(a,t.target.checked)},null,40,["checked","onChange"]),T(" "+g(a.phon),1)])])))),128))])):(u(),p("div",Q,[m("label",Y,[h(m("input",{type:"checkbox",name:"items","onUpdate:modelValue":a[8]||(a[8]=a=>e.config.excludeSilence=a)},null,512),[[S,e.config.excludeSilence]]),Z])]))])):C("",!0),e.shouldShowAlignmentCalc?(u(),p("div",ee,[ae,(u(!0),p(f,null,I(e.alignments,((t,l)=>(u(),p("div",{key:t,class:"control"},[m("label",te,[h(m("input",{type:"radio",name:"alignment",value:t,"onUpdate:modelValue":a[9]||(a[9]=a=>e.config.calculationType=a)},null,8,["value"]),[[y,e.config.calculationType]]),T(" "+g(l),1)])])))),128))])):C("",!0),e.shouldShowAlignment?(u(),p("div",le,[se,m("div",oe,[h(m("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":a[10]||(a[10]=a=>e.config.alignment=a)},null,512),[[b,e.config.alignment]])])])):C("",!0),e.shouldShowLuceChoice?(u(),p("div",ie,[ne,m("div",ce,[m("label",de,[h(m("input",{type:"radio",name:"choice",value:e.choiceNormal,"onUpdate:modelValue":a[11]||(a[11]=a=>e.config.choice=a)},null,8,["value"]),[[y,e.config.choice]]),re]),m("label",ue,[h(m("input",{type:"radio",name:"choice",value:e.choiceForced,"onUpdate:modelValue":a[12]||(a[12]=a=>e.config.choice=a)},null,8,["value"]),[[y,e.config.choice]]),pe])]),me,m("label",null,[he,h(m("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":a[13]||(a[13]=a=>e.config.kValue=a),style:{width:"50px"}},null,512),[[b,e.config.kValue]])])])):C("",!0),e.shouldShowCompetIndex?(u(),p("div",ye,[ve,m("div",be,[m("div",fe,[h(m("select",{"onUpdate:modelValue":a[14]||(a[14]=a=>e.config.competType=a)},[m("option",{value:e.competTypeRaw},"Raw",8,["value"]),m("option",{value:e.competTypeFirstDeriv},"1st Derivative",8,["value"]),m("option",{value:e.competTypeSecondDeriv},"2nd Derivative",8,["value"])],512),[[v,e.config.competType]])])])])):C("",!0),e.shouldShowCompetSlope?(u(),p("div",Ie,[Te,m("div",ge,[h(m("input",{class:"input",min:"2",type:"number","onUpdate:modelValue":a[15]||(a[15]=a=>e.config.competSlope=a)},null,512),[[b,e.config.competSlope]])])])):C("",!0)])};var Se=a({extends:A,mixins:[{props:{chartData:{type:Object,required:!0,default:()=>{}}},emits:["labels:update","xlabels:update","ylabels:update","chart:update","chart:destroy","chart:render"],watch:{chartData:function(e,a){if(a){let t=this.$data._chart,l=e.datasets.map((e=>e.label)),s=a.datasets.map((e=>e.label));const o=JSON.stringify(s);JSON.stringify(l)===o&&a.datasets.length===e.datasets.length?(e.datasets.forEach(((e,l)=>{const s=Object.keys(a.datasets[l]),o=Object.keys(e);s.filter((e=>"_meta"!==e&&-1===o.indexOf(e))).forEach((e=>{delete t.data.datasets[l][e]}));for(const a in e)e.hasOwnProperty(a)&&(t.data.datasets[l][a]=e[a])})),e.hasOwnProperty("labels")&&(t.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(t.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(t.data.yLabels=e.yLabels,this.$emit("ylabels:update")),t.update(),this.$emit("chart:update")):(t&&(t.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}}}],data:()=>({options:{responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}}}}),mounted(){this.renderChart(this.chartData,this.options)}}),Ce=a({name:"ChartTab",components:{SimulationToolbar:e,AnalysisConfig:_,AnalysisChart:Se},setup(){const e=r();return{chartData:l((()=>({datasets:e.analysisData.value})))}}});var Oe={container:"_container_1348h_2",toolbar:"_toolbar_1348h_8",main:"_main_1348h_14",grid:"_grid_1348h_22","chart-wrapper":"_chart-wrapper_1348h_28"};(Ce.__cssModules={}).$style=Oe,Ce.render=function(e,a,t,l,s,o){const i=O("SimulationToolbar"),n=O("AnalysisConfig"),c=O("AnalysisChart");return u(),p("div",{class:e.$style.container},[m("div",{class:e.$style.toolbar},[m(i)],2),m("div",{class:e.$style.main},[m("div",{class:e.$style.grid},[m(n),m(c,{"chart-data":e.chartData,class:e.$style["chart-wrapper"]},null,8,["chart-data","class"])],2)],2)],2)};export default Ce;
