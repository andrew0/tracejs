import{d as t,o as e,c as a,a as i,t as s,e as r,h as n,k as l}from"./vendor.66dd1abc.js";import{g as o,T as d}from"./index.777d10f6.js";import{C as c,g as u}from"./BaseChart.2b94d205.js";var h=t({name:"ConfigInput",props:{modelValue:{type:[String,Number],default:""},label:{type:String,default:""},note:{type:String,default:""},type:{type:String,default:"number"}},emits:["update:modelValue"],setup:(t,{emit:e})=>({onInput:a=>{const i="number"===t.type?Number(a.target.value):a.target.value;e("update:modelValue",i)}})});const p={class:"field is-horizontal",style:{width:"30rem"}},m={class:"field-label"},x={class:"label",style:{width:"10rem"}},g={class:"field-body"},b={class:"field"},y=["type","value"],f={class:"help is-info"};h.render=function(t,r,n,l,o,d){return e(),a("div",p,[i("div",m,[i("label",x,s(t.label),1)]),i("div",g,[i("div",b,[i("input",{class:"input",type:t.type,value:t.modelValue,onInput:r[0]||(r[0]=(...e)=>t.onInput&&t.onInput(...e))},null,40,y),i("p",f,s(t.note),1)])])])};var k=c.helpers.options.resolve;c.controllers.matrix=c.DatasetController.extend({dataElementType:c.elements.Rectangle,update:function(t){var e,a,i=this,s=i.getMeta(),r=s.data||[];for(i._xScale=i.getScaleForId(s.xAxisID),i._yScale=i.getScaleForId(s.yAxisID),e=0,a=r.length;e<a;++e)i.updateElement(r[e],e,t)},updateElement:function(t,e,a){var i=this,s=i.getDataset(),r=i.index,n=s.data[e],l=i._xScale,o=i._yScale,d=i._resolveElementOptions(t,e),c=a?l.getBasePixel():l.getPixelForValue(n,e,r),u=a?o.getBasePixel():o.getPixelForValue(n,e,r),h=d.height,p=d.width,m=h/2;t._xScale=l,t._yScale=o,t._options=d,t._datasetIndex=r,t._index=e,t._model={x:c,base:u-m,y:u+m,width:p,height:h,backgroundColor:d.backgroundColor,borderColor:d.borderColor,borderSkipped:d.borderSkipped,borderWidth:d.borderWidth},t.pivot()},draw:function(){var t,e,a=this.getMeta().data||[];for(t=0,e=a.length;t<e;++t)a[t].draw()},_resolveElementOptions:function(t,e){var a,i,s,r=this,n=r.chart,l=n.data.datasets[r.index],o=n.options.elements.rectangle,d={},c={chart:n,dataIndex:e,dataset:l,datasetIndex:r.index},u=["backgroundColor","borderColor","borderSkipped","borderWidth","width","height"];for(a=0,i=u.length;a<i;++a)d[s=u[a]]=k([l[s],o[s]],c,e);return d}}),c.defaults.matrix={hover:{mode:"nearest",intersect:!0},tooltips:{mode:"nearest",intersect:!0},scales:{xAxes:[{type:"linear"}],yAxes:[{type:"linear"}]},elements:{rectangle:{borderSkipped:!1,width:20,height:20}}};var S=t({extends:u("matrix-chart","matrix"),props:{chartData:Array,chartTitle:String,xAxisTitle:String,yAxisTitle:String,yLabelCallback:Function,numXTicks:Number,numYTicks:Number,yStepSize:Number,simConfig:Object},data(){return{options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},legend:{display:!1},tooltips:{enabled:!1},title:{display:!0,text:this.chartTitle},scales:{xAxes:[{ticks:{display:!0,min:0,max:this.numXTicks-1,stepSize:1},gridLines:{display:!1},scaleLabel:{display:!0,labelString:this.xAxisTitle}}],yAxes:[{ticks:{display:!0,min:0,max:this.numYTicks,stepSize:this.yStepSize||1,callback:this.yLabelCallback||(t=>t),fontColor:"transparent"},gridLines:{display:!0},scaleLabel:{display:!0,labelString:this.yAxisTitle}}]}}}},watch:{chartData:function(){this.updateChart()}},mounted(){this.addPlugin({afterDraw:t=>{const e=t.ctx,a=t.scales["y-axis-0"],i=a.getPixelForTick(1)-a.getPixelForTick(0);c.helpers.each(a.ticks,(function(t,s){if(s===a.ticks.length-1)return;const r=a.right,n=a.getPixelForTick(s);e.save(),e.textBaseline="middle",e.textAlign="right",e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillText(t,r-10,n+i/2),e.restore()}))}}),this.updateChart()},methods:{updateChart(){const t=[];for(const[a,i]of this.chartData.entries())for(const[e,s]of i.entries())s>0&&t.push({x:e+.5,y:this.numYTicks-.5-a,v:(Math.min(Math.max(s,0),1)-this.simConfig.min)/(this.simConfig.max-this.simConfig.min)});const e={datasets:[{label:"My Matrix",data:t,backgroundColor:t=>{const e=t.dataset.data[t.dataIndex];return`rgba(0, 0, 0, ${e?e.v:0})`},width:t=>{const{right:e,left:a}=t.chart.chartArea;return(e-a)/this.options.scales.xAxes[0].ticks.max},height:t=>{const{bottom:e,top:a}=t.chart.chartArea;return(e-a)/this.options.scales.yAxes[0].ticks.max}}]};this.renderChart(e,this.options)}}});const C=["POW","VOC","DIF","ACU","GRD","VOI","BUR"],v=9;var T=t({components:{SimulationChart:S},setup(){const t=o();return{store:t,numXTicks:9*C.length,numYTicks:9,chartData:r((()=>{try{return t.isModelInputValid.value=!0,new d(t.config).inputLayer||[]}catch{return t.isModelInputValid.value=!1,[]}})),yLabelCallback:(t,e)=>e<C.length?C[e]:null}}});T.render=function(t,a,i,s,r,o){const d=n("SimulationChart");return e(),l(d,{"chart-data":t.chartData,"chart-title":"Model Input","x-axis-title":"Time","y-axis-title":"Feature Continua","y-label-callback":t.yLabelCallback,"num-x-ticks":t.store.config.fSlices+1,"num-y-ticks":t.numXTicks,"y-step-size":t.numYTicks,"sim-config":t.store.config},null,8,["chart-data","y-label-callback","num-x-ticks","num-y-ticks","y-step-size","sim-config"])};export{C,v as N,S,h as _,T as a};
