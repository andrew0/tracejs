import{S as U}from"./SimulationToolbar.b78e1c16.js";import{d as C,f as E,e as m,v as N,o as i,c as l,a as t,x as d,J as _,A as V,z as T,F as k,r as $,q as u,t as w,y as F,B as v,j as S,n as b,l as A}from"./vendor.b7f06019.js";import{b as c,d as P,e as I,f as D,h as O,_ as R,g as W}from"./index.7d6a1ba5.js";import{S as j}from"./BaseChart.81a2306a.js";import"./FileSaver.min.0a96e38f.js";const B=C({setup(){const e=W(),o=e.config,a=e.analysisConfig,h=new Set,y=E(typeof a.itemsToWatch=="number"?a.itemsToWatch:10),f=m({get(){return Array.isArray(a.itemsToWatch)},set(n){n?a.itemsToWatch=Array.from(h,r=>r.phon):a.itemsToWatch=y.value}});N(()=>{f.value||(a.itemsToWatch=y.value)});const s=E(c.ACTIVATIONS);return N(()=>{s.value===c.ACTIVATIONS?a.kValue=0:s.value===c.COMPETITION_INDEX?a.kValue=-1:a.kValue=4}),{store:e,simConfig:o,config:a,domainWords:P.WORDS,domainPhonemes:P.PHONEMES,contentTypeResponseProbabilities:c.RESPONSE_PROBABILITIES,contentTypeActivations:c.ACTIVATIONS,contentTypeCompetitionIndex:c.COMPETITION_INDEX,competTypeRaw:I.RAW,competTypeFirstDeriv:I.FIRST_DERIVATIVE,competTypeSecondDeriv:I.SECOND_DERIVATIVE,choiceNormal:D.NORMAL,choiceForced:D.FORCED,alignments:{"Max (Post-Hoc)":O.MAX_POSTHOC,Specified:O.STATIC},contentType:s,itemsToWatch:h,numItemsToWatch:y,useSpecifiedItems:f,shouldShowAlignmentCalc:m(()=>s.value!==c.COMPETITION_INDEX),shouldShowAlignment:m(()=>{const{calculationType:n}=a;return s.value!==c.COMPETITION_INDEX&&n===O.STATIC}),shouldShowLuceChoice:m(()=>s.value===c.RESPONSE_PROBABILITIES),shouldShowItems:m(()=>s.value!==c.COMPETITION_INDEX),shouldShowCompetIndex:m(()=>s.value===c.COMPETITION_INDEX),shouldShowCompetSlope:m(()=>s.value===c.COMPETITION_INDEX&&a.competType!==I.RAW),isWatchingItem(n){return h.has(n)},setIsWatchingItem(n,r){r?(h.add(n),a.itemsToWatch=Array.from(h,g=>g.phon)):h.delete(n)}}}}),X=t("p",null," NOTE: if the chart doesn't appear, try resizing your browser window to make it redraw (this is a known bug) ",-1),K={class:"field"},z={class:"field"},H=t("label",{class:"label"},"Analyze",-1),J={class:"control"},q={class:"radio"},G=["value"],Q=u(" Words "),Y={class:"radio"},Z=["value"],x=u(" Phonemes "),ee={class:"field"},te=t("label",{class:"label"},"Content",-1),se={class:"control"},oe={class:"select"},ae=["value"],ne=["value"],ie=["value"],le={key:0,class:"field"},de=t("label",{class:"label"},"Items",-1),re={class:"control"},ce={class:"radio"},ue=u(" Use top "),he=["disabled"],pe=u(" items "),me={class:"control"},ye={class:"radio"},_e=u(" Use selected items "),fe={key:0,class:"items-container"},ve={class:"checkbox"},be=["checked","onChange"],Te={key:1,class:"control"},Ie={class:"checkbox"},ge=u(" Exclude silence "),Ce={key:1,class:"field"},Se=t("label",{class:"label"},"Alignment Calculation",-1),Ae={class:"radio"},Oe=["value"],Ee={key:2,class:"field"},Ne=t("label",{class:"label"},"Alignment",-1),Ve={class:"control"},ke={key:3,class:"field"},$e=t("label",{class:"label"},"Luce Choice",-1),we={class:"control"},Pe={class:"radio"},De=["value"],Re=u(" All Items "),We={class:"radio"},Le=["value"],Me=u(" Forced Choice "),Ue=t("br",null,null,-1),Fe=u(" K Value "),je={key:4,class:"field"},Be=t("label",{class:"label"},"Global Competition Index",-1),Xe={class:"control"},Ke={class:"select"},ze=["value"],He=["value"],Je=["value"],qe={key:5,class:"field"},Ge=t("label",{class:"label"},"Sampling Width",-1),Qe={class:"control"};function Ye(e,o,a,h,y,f){return i(),l("div",null,[X,t("div",K,[t("button",{class:"button",onClick:o[0]||(o[0]=s=>e.store.updateAnalysis())},"Refresh chart")]),t("div",z,[H,t("div",J,[t("label",q,[d(t("input",{type:"radio",name:"domain",value:e.domainWords,"onUpdate:modelValue":o[1]||(o[1]=s=>e.config.domain=s)},null,8,G),[[_,e.config.domain]]),Q]),t("label",Y,[d(t("input",{type:"radio",name:"domain",value:e.domainPhonemes,"onUpdate:modelValue":o[2]||(o[2]=s=>e.config.domain=s)},null,8,Z),[[_,e.config.domain]]),x])])]),t("div",ee,[te,t("div",se,[t("div",oe,[d(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.contentType=s)},[t("option",{value:e.contentTypeActivations},"Activations",8,ae),t("option",{value:e.contentTypeResponseProbabilities},"Response Probabilities",8,ne),t("option",{value:e.contentTypeCompetitionIndex},"Competition Index",8,ie)],512),[[V,e.contentType]])])])]),e.shouldShowItems?(i(),l("div",le,[de,t("div",re,[t("label",ce,[d(t("input",{type:"radio",name:"items",value:!1,"onUpdate:modelValue":o[4]||(o[4]=s=>e.useSpecifiedItems=s)},null,512),[[_,e.useSpecifiedItems]]),ue,d(t("input",{type:"number",style:{width:"50px"},disabled:e.useSpecifiedItems,"onUpdate:modelValue":o[5]||(o[5]=s=>e.numItemsToWatch=s)},null,8,he),[[T,e.numItemsToWatch]]),pe])]),t("div",me,[t("label",ye,[d(t("input",{type:"radio",name:"items",value:!0,"onUpdate:modelValue":o[6]||(o[6]=s=>e.useSpecifiedItems=s)},null,512),[[_,e.useSpecifiedItems]]),_e])]),e.useSpecifiedItems?(i(),l("div",fe,[(i(!0),l(k,null,$(e.simConfig.lexicon,(s,n)=>(i(),l("div",{key:n,class:"control"},[t("label",ve,[t("input",{type:"checkbox",checked:e.isWatchingItem(s),onChange:r=>e.setIsWatchingItem(s,r.target.checked)},null,40,be),u(" "+w(s.phon),1)])]))),128))])):(i(),l("div",Te,[t("label",Ie,[d(t("input",{type:"checkbox",name:"items","onUpdate:modelValue":o[7]||(o[7]=s=>e.config.excludeSilence=s)},null,512),[[F,e.config.excludeSilence]]),ge])]))])):v("",!0),e.shouldShowAlignmentCalc?(i(),l("div",Ce,[Se,(i(!0),l(k,null,$(e.alignments,(s,n)=>(i(),l("div",{key:s,class:"control"},[t("label",Ae,[d(t("input",{type:"radio",name:"alignment",value:s,"onUpdate:modelValue":o[8]||(o[8]=r=>e.config.calculationType=r)},null,8,Oe),[[_,e.config.calculationType]]),u(" "+w(n),1)])]))),128))])):v("",!0),e.shouldShowAlignment?(i(),l("div",Ee,[Ne,t("div",Ve,[d(t("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":o[9]||(o[9]=s=>e.config.alignment=s)},null,512),[[T,e.config.alignment]])])])):v("",!0),e.shouldShowLuceChoice?(i(),l("div",ke,[$e,t("div",we,[t("label",Pe,[d(t("input",{type:"radio",name:"choice",value:e.choiceNormal,"onUpdate:modelValue":o[10]||(o[10]=s=>e.config.choice=s)},null,8,De),[[_,e.config.choice]]),Re]),t("label",We,[d(t("input",{type:"radio",name:"choice",value:e.choiceForced,"onUpdate:modelValue":o[11]||(o[11]=s=>e.config.choice=s)},null,8,Le),[[_,e.config.choice]]),Me])]),Ue,t("label",null,[Fe,d(t("input",{class:"input",min:"0",type:"number","onUpdate:modelValue":o[12]||(o[12]=s=>e.config.kValue=s),style:{width:"50px"}},null,512),[[T,e.config.kValue]])])])):v("",!0),e.shouldShowCompetIndex?(i(),l("div",je,[Be,t("div",Xe,[t("div",Ke,[d(t("select",{"onUpdate:modelValue":o[13]||(o[13]=s=>e.config.competType=s)},[t("option",{value:e.competTypeRaw},"Raw",8,ze),t("option",{value:e.competTypeFirstDeriv},"1st Derivative",8,He),t("option",{value:e.competTypeSecondDeriv},"2nd Derivative",8,Je)],512),[[V,e.config.competType]])])])])):v("",!0),e.shouldShowCompetSlope?(i(),l("div",qe,[Ge,t("div",Qe,[d(t("input",{class:"input",min:"2",type:"number","onUpdate:modelValue":o[14]||(o[14]=s=>e.config.competSlope=s)},null,512),[[T,e.config.competSlope]])])])):v("",!0)])}var Ze=R(B,[["render",Ye]]);function xe(e,o){if(o){let a=this.$data._chart,h=e.datasets.map(n=>n.label),y=o.datasets.map(n=>n.label);const f=JSON.stringify(y);JSON.stringify(h)===f&&o.datasets.length===e.datasets.length?(e.datasets.forEach((n,r)=>{const g=Object.keys(o.datasets[r]),M=Object.keys(n);g.filter(p=>p!=="_meta"&&M.indexOf(p)===-1).forEach(p=>{delete a.data.datasets[r][p]});for(const p in n)n.hasOwnProperty(p)&&(a.data.datasets[r][p]=n[p])}),e.hasOwnProperty("labels")&&(a.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(a.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(a.data.yLabels=e.yLabels,this.$emit("ylabels:update")),a.update(),this.$emit("chart:update")):(a&&(a.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}const et={props:{chartData:{type:Object,required:!0,default:()=>{}}},emits:["labels:update","xlabels:update","ylabels:update","chart:update","chart:destroy","chart:render"],watch:{chartData:xe}};var tt=C({extends:j,mixins:[et],data(){return{options:{responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}}}}},mounted(){this.renderChart(this.chartData,this.options)}});const st="_container_1348h_2",ot="_toolbar_1348h_8",at="_main_1348h_14",nt="_grid_1348h_22";var it={container:st,toolbar:ot,main:at,grid:nt,"chart-wrapper":"_chart-wrapper_1348h_28"};const lt=C({name:"ChartTab",components:{SimulationToolbar:U,AnalysisConfig:Ze,AnalysisChart:tt},setup(){const e=W();return{chartData:m(()=>({datasets:e.analysisData.value}))}}});function dt(e,o,a,h,y,f){const s=A("SimulationToolbar"),n=A("AnalysisConfig"),r=A("AnalysisChart");return i(),l("div",{class:b(e.$style.container)},[t("div",{class:b(e.$style.toolbar)},[S(s)],2),t("div",{class:b(e.$style.main)},[t("div",{class:b(e.$style.grid)},[S(n),S(r,{"chart-data":e.chartData,class:b(e.$style["chart-wrapper"])},null,8,["chart-data","class"])],2)],2)],2)}const L={};L.$style=it;var yt=R(lt,[["render",dt],["__cssModules",L]]);export{yt as default};
